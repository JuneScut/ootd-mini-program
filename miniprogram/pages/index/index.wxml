<!--index.wxml-->
<view class="content-container">
  <!-- ä»Šæ—¥å¤©æ°”å¡ç‰‡ -->
  <skeleton type="weather" loading="{{loading}}">
    <view class="card weather-card">
      <view class="flex justify-between items-start mb-6">
        <view>
          <view class="city-name">{{city}}</view>
          <view class="date-text">{{date}}</view>
        </view>
        <view class="text-right">
          <view class="flex items-center">
            <text class="weather-icon-large weather-animation">{{weatherIcon}}</text>
            <text class="temperature-large">{{temperature}}Â°</text>
          </view>
          <view class="weather-desc">{{weatherDesc}}</view>
        </view>
      </view>
      
      <view class="weather-details">
        <view class="weather-detail-item">
          <text class="detail-icon">ğŸ’¨</text>
          <view class="detail-label">{{windDirection}}</view>
          <view class="detail-value">{{windLevel}}</view>
        </view>
        <view class="weather-detail-item">
          <text class="detail-icon">ğŸ’§</text>
          <view class="detail-label">æ¹¿åº¦</view>
          <view class="detail-value">{{humidity}}</view>
        </view>
        <view class="weather-detail-item">
          <text class="detail-icon">â˜€ï¸</text>
          <view class="detail-label">ç´«å¤–çº¿</view>
          <view class="detail-value">{{uvLevel}}</view>
        </view>
      </view>
      
      <view class="bg-cloud">â˜ï¸</view>
    </view>
  </skeleton>
  
  <!-- è¿‘ä¸ƒæ—¥å¤©æ°”å¡ç‰‡ -->
  <skeleton type="weekly" loading="{{loading}}">
    <view class="card">
      <view class="section-title">è¿‘ä¸ƒæ—¥å¤©æ°”</view>
      
      <scroll-view scroll-x="true" class="weather-days">
        <view class="weather-days-content">
          <block wx:for="{{weeklyWeather}}" wx:key="day">
            <view class="weather-day">
              <view class="day-name">{{item.day}}</view>
              <text class="day-icon">{{item.icon}}</text>
              <view class="day-high">{{item.high}}Â°</view>
              <view class="day-low">{{item.low}}Â°</view>
            </view>
            <view wx:if="{{index < weeklyWeather.length-1}}" class="day-divider"></view>
          </block>
        </view>
      </scroll-view>
    </view>
  </skeleton>
  
  <!-- ä»Šæ—¥ç©¿æ­é£æ ¼å¡ç‰‡ -->
  <view class="card">
    <view class="section-title">ä»Šæ—¥ç©¿æ­é£æ ¼</view>
    <view class="style-desc">é€‰æ‹©ä½ ä»Šå¤©æƒ³è¦çš„ç©¿æ­é£æ ¼</view>
    
    <view class="style-chips">
      <block wx:for="{{styleOptions}}" wx:key="*this">
        <view class="style-chip {{currentStyle === item ? 'active' : ''}}" 
              bindtap="selectStyle" data-style="{{item}}">{{item}}</view>
      </block>
    </view>
    
    <view class="mt-6">
      <button class="gradient-button" bindtap="showOOTDPopup">
        ç”Ÿæˆä»Šæ—¥OOTD
      </button>
    </view>
  </view>
</view>

<!-- å¼•å…¥OOTDå¼¹å‡ºå±‚ç»„ä»¶ -->
<popup 
  show="{{showPopup}}" 
  loading="{{ootdLoading}}"
  temperature="{{temperature}}" 
  weatherDesc="{{weatherDesc}}" 
  styleType="{{currentStyle}}" 
  ootdAdvice="{{ootdAdvice}}" 
  carouselItems="{{carouselItems}}"
  bindclose="hideOOTDPopup">
</popup>

<!-- å¾®ä¿¡å°ç¨‹åºåº•éƒ¨å¯¼èˆªæ  -->
<view class="wx-tab-bar">
  <view class="wx-tab-item active">
    <text class="wx-tab-icon">ğŸ‘•</text>
    <view>OOTD</view>
  </view>
  <navigator url="/pages/profile/profile" open-type="switchTab" class="wx-tab-item">
    <text class="wx-tab-icon">ğŸ‘¤</text>
    <view>æˆ‘çš„</view>
  </navigator>
</view>